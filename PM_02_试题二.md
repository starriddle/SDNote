# 下午题 02 数据库设计

- [下午题 02 数据库设计](#下午题-02-数据库设计)
  - [说明](#说明)
  - [E-R 图](#e-r-图)
  - [关系模式](#关系模式)

## 说明

下午题 试题二：

- 教程 9 数据库基础知识 P455-P516
- 分值：15 分
- 题型：数据库设计，E-R图，关系模式
- 结构：
  - 说明
  - 需求分析结果
  - 概念模型设计：E-R图
  - 逻辑结构设计：关系模式
  - 问题：
    1. E-R图
       - 补充缺失的联系，指出联系类型
    2. 关系模式
       - 补充缺失的属性
       - 说明某几个关系的主键和外键(完整性约束关系)
    3. 扩展题
       1. 新需求，添加新的联系、实体、关系模式(完整性约束)
       2. 其他问题，如弱实体、父类子类等

## E-R 图

- 实体：矩形
  - 弱实体：双边矩形
  - 子实体：双竖边矩形
- 属性：椭圆
- 联系：菱形

## 关系模式

关系模式

- 格式：关系名（属性名1，属性名2，...，属性名n）
- 候选码/键：
  - 属性（组合），其值能够唯一的标识一个元组
- 主码/键：
  - 在一个关系中可能有多个候选码，从中选择一个作为主码
- 外码/键：
  - 如果一个关系中的属性或属性组合并非该关系的码，但它们是另外一个关系的码，则称其为该关系的外码

实体-关系模式 转换

- 实体名 --> 关系模式名
- 实体属性 --> 关系模式属性
- 实体标识符 --> 关系的码

联系-关系模式 转换

- 两个实体
  - 一对一联系
    - 独立关系模式
      - 联系名称 --> 关系模式名称
      - 2个实体的码+联系的属性 --> 关系模式属性
      - 任一方实体的码 -->关系的码
    - 归并到任一方实体
      - 另一方实体的码+联系的属性 --> 待归并一方实体的属性集
  - 一对多联系
    - 独立关系模式
      - 联系名称 --> 关系模式名称
      - 2个实体的码+联系的属性 --> 关系模式属性
      - 多方实体的码 --> 关系的码
    - 归并到多方实体
      - 一方实体的码+联系的属性 --> 多方实体的属性集
  - 多对多联系
    - 独立关系模式
      - 联系名称 --> 关系模式名称
      - 2个实体的码+联系属性 --> 关系模式属性
      - 2个实体的码构成的属性组 --> 关系的码
- 三个实体
  - 一对一对一联系
    - 同一对一联系，有2种转换方法
  - 一对多对多联系
    - 独立关系模式
      - 参照多对多联系的转换
        - 2个多方实体的码构成的属性组 --> 关系的码
  - 多对多对多联系
    - 独立关系模式
      - 同多对多联系的转换

超类和子类的转换

- 超类/子类实体都可以转换为一个关系
- 超类实体的主码要加到子类实体中
  - 但不一定作为子类实体的主码
